{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// pixabay-api.js\n\nexport const fetchImages = async (query, page = 1, perPage = 40) => {\n  const API_KEY = '48615456-7478b61ba219341e00e1cbdfc'; // ключ API\n\n  const URL = `https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n  \n  console.log(URL); // Вивести URL для перевірки\n    \n  try {\n    // Використовуємо axios для отримання даних\n    const response = await axios.get(URL);\n\n    // Виводимо загальний розмір колекції\n    console.log(`Total images found: ${response.data.totalHits}`);\n  \n       // Перевіряємо, чи є необхідні дані\n       if (!response.data.hits || response.data.hits.length === 0) {\n        console.log(`No images found for query: ${query}`); // Додаткове логування\n        throw new Error('No images found for the given search query.');\n      }\n      console.log(`Found ${response.data.totalHits} images.`); // Логування кількості знайдених зображень\n    // Повертаємо масив зображень і загальну кількість\n    return {\n      images: response.data.hits,\n      totalHits: response.data.totalHits,\n    };\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw new Error(error.message); // Перекидаємо помилку далі\n  }\n};","// render-functions.js\n\n// Функція для очищення галереї перед новим пошуком\nexport const clearGallery = () => {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = ''; // Очищаємо галерею\n};\n\n// Функція для відображення карток зображень\nexport const renderImages = (images) => {\n  const gallery = document.querySelector('.gallery'); //зв'язок з html div з класом gallery\n\n  const markup = images.map(image => {\n    return `\n    <a href=\"${image.largeImageURL}\">\n      <div class=\"gallery-item\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        <div class=\"info\">\n          <p>Likes: ${image.likes}</p>\n          <p>Views: ${image.views}</p>\n          <p>Comments: ${image.comments}</p>\n          <p>Downloads: ${image.downloads}</p>\n        </div>\n      </div>\n    </a>\n    `;\n  }).join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup); // додаємо нові елементи до існуючих\n\n  // Після того, як зображення додано, потрібно оновити SimpleLightbox\n  const lightbox = new SimpleLightbox('.gallery a');\n\n  // Отримуємо висоту однієї картки галереї\n  const galleryItem = document.querySelector('.gallery-item');\n  const galleryItemHeight = galleryItem.getBoundingClientRect().height;\n\n  // Плавно прокручуємо сторінку на дві висоти картки\n  window.scrollBy({\n    top: 2 * galleryItemHeight,  // Прокручуємо на дві висоти картки\n    behavior: 'smooth'  // Плавна прокрутка\n  });\n};\n\n// Функція для показу повідомлення, якщо нічого не знайдено\nexport const showNoResultsMessage = () => {\n  iziToast.error({\n    title: 'Sorry',\n    message: 'There are no images matching your search query. Please try again!',\n  });\n};\n\n// Функція для показу індикатора завантаження\nexport const showLoadingIndicator = () => {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'block'; // Показуємо індикатор\n};\n\n// Функція для приховання індикатора завантаження\nexport const hideLoadingIndicator = () => {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'none'; // Приховуємо індикатор\n};\n\n// Функція для показу повідомлення про кінець колекції\nexport const showEndOfResultsMessage = () => {\n  iziToast.info({\n    title: 'End of Results',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: 'bottomCenter', // розташування повідомлення\n    timeout: 5000, // час показу повідомлення (5 секунд)\n  });\n};\n\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, clearGallery, showNoResultsMessage, showLoadingIndicator, hideLoadingIndicator, showEndOfResultsMessage } from './js/render-functions.js';\n\nconst form = document.querySelector('#search-form');\nconst input = document.querySelector('.search-input');\nconst loader = document.querySelector('.loader'); // Отримуємо індикатор завантаження\nconst gallery = document.querySelector('.gallery'); // Галерея\nconst loadMoreButton = document.querySelector('#load-more'); // Кнопка Load more\nlet currentPage = 1;\nlet query = ''; // Для збереження запиту користувача\nlet totalHits = 0; // Загальна кількість зображень\n\nconsole.log(iziToast);  // iziToast, якщо бібліотека підключена\n\nform.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  console.log('Search button clicked');\n  query = input.value.trim();\n\n  if (query === '') return;\n\n  currentPage = 1; // Скидаємо сторінку на 1 при новому запиті\n  loader.style.display = 'block'; // Показуємо індикатор завантаження\n  loadMoreButton.style.display = 'none'; // Ховаємо кнопку \"Load more\" при новому запиті\n\n  // Очищаємо галерею перед новим пошуком\n  gallery.innerHTML = '';\n\n  try {\n    const { images, totalHits: fetchedTotalHits } = await fetchImages(query, currentPage);\n\n    hideLoadingIndicator(); // Приховуємо індикатор завантаження\n    totalHits = fetchedTotalHits;\n\n    if (images.length > 0) {\n      renderImages(images); // Відображаємо зображення\n      if (images.length < totalHits) {\n        loadMoreButton.style.display = 'block'; // Показуємо кнопку \"Load more\", якщо є ще зображення\n      } else {\n        showEndOfResultsMessage(); // Якщо зображення закінчились\n      }\n    } else {\n      showNoResultsMessage(); // Якщо немає результатів\n    }\n  } catch (error) {\n    hideLoadingIndicator(); // Приховуємо індикатор у разі помилки\n    iziToast.error({\n      title: 'Sorry',\n      message: 'An error occurred while fetching the images.',\n    });\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  currentPage += 1; // Збільшуємо номер сторінки\n\n  loader.style.display = 'block'; // Показуємо індикатор завантаження\n\n  try {\n    const { images } = await fetchImages(query, currentPage);\n\n    hideLoadingIndicator(); // Приховуємо індикатор завантаження\n\n    if (images.length > 0) {\n      renderImages(images); // Додаємо нові зображення\n      if (gallery.children.length >= totalHits) {\n        loadMoreButton.style.display = 'none'; // Ховаємо кнопку, якщо всі зображення завантажено\n        showEndOfResultsMessage(); // Показуємо повідомлення про кінець колекції\n      }\n    } else {\n      loadMoreButton.style.display = 'none'; // Ховаємо кнопку, якщо зображення більше не доступні\n      showEndOfResultsMessage();\n    }\n  } catch (error) {\n    hideLoadingIndicator(); // Приховуємо індикатор у разі помилки\n    iziToast.error({\n      title: 'Sorry',\n      message: 'An error occurred while fetching the images.',\n    });\n  }\n});\n"],"names":["fetchImages","query","page","perPage","URL","response","error","renderImages","images","gallery","markup","image","galleryItemHeight","showNoResultsMessage","hideLoadingIndicator","loader","showEndOfResultsMessage","form","input","loadMoreButton","currentPage","totalHits","event","fetchedTotalHits"],"mappings":"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"}